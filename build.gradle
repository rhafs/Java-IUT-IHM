apply plugin: "idea"
apply plugin: "java"

repositories {
    mavenCentral()
}

dependencies {
    compile "com.intellij:forms_rt:7.0.3"
    runtime "com.intellij:forms_rt:7.0.3"
}

task jarCalculatrice(type: Jar) {
    baseName = "calculatrice"
    String className = baseName.capitalize()

    from(sourceSets.main.output) {
        include "$baseName/**"
    }

    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }

    manifest {
        attributes "Implementation-Title": "$className",
                "Implementation-Version": "1.0.0",
                "Main-Class": "$baseName.$className"
    }
}

task jarCopier(type: Jar) {
    baseName = "copier"
    String className = baseName.capitalize()

    from(sourceSets.main.output) {
        include "$baseName/**"
        include "hotel1.jpg"
    }

    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }

    manifest {
        attributes "Implementation-Title": "$className",
                "Implementation-Version": "1.0.0",
                "Main-Class": "$baseName.$className"
    }
}

artifacts {
    archives jarCalculatrice, jarCopier
}
